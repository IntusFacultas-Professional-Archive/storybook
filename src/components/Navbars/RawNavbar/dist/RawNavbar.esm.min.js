import{NavbarContainer as e,NavbarTitle as t,NavbarContentContainer as n}from"@IntusFacultas/navbar";import{NButton as r}from"@IntusFacultas/button";var i={components:{NavbarContainer:e,NavbarTitle:t,NavbarContentContainer:n,NButton:r},data:function(){return{open:!1,contentWidth:0,containerWidth:0,navHeight:0,observer:null,titleWidth:0,blockWidth:0,leaves:[]}},mounted:function(){this.calculateDimensions(),window.addEventListener("resize",this.debounce(this.calculateDimensions,10,!0),{passive:!0}),this.calculateContentWidth(),this.observer=new MutationObserver(this.calculateContentWidth),this.observer.observe(this.$refs.content.$el,{childList:!0,characterData:!0,subtree:!0}),window.addEventListener("click",this.checkOffclick)},beforeDestroy:function(){this.observer.disconnect(),window.removeEventListener("click",this.checkOffclick),window.removeEventListener("resize",this.debounce(this.calculateDimensions,10,!0))},updated:function(){this.calculateDimensions()},props:{title:{type:Object,default:function(){return{text:"Brand",url:"#",html:""}}},fixed:{type:Boolean,default:!1},flavor:{type:String,default:""}},methods:{calculateContentWidth:function(){var e=this;!function t(n){"LI"==n.tagName.toUpperCase()?n.children.forEach((function(t){return e.leaves.push(function e(t){var n=["a","abbr","acronym","b","bdo","big","br","button","cite","code","dfn","em","i","img","input","kbd","label","map","object","output","q","samp","script","select","small","span","strong","sub","sup","textarea","time","tt","var"];if(-1!=n.indexOf(t.tagName.toLowerCase()))return t;var r=!0,i=!1,o=void 0;try{for(var a,s=t.children[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(-1!=n.indexOf(l.tagName.toLowerCase()))return l;var c=!0,d=!1,h=void 0;try{for(var u,f=l.children[Symbol.iterator]();!(c=(u=f.next()).done);c=!0){var p=e(u.value);if(null!=p)return p}}catch(e){d=!0,h=e}finally{try{c||null==f.return||f.return()}finally{if(d)throw h}}}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return null}(t))})):n.children.forEach((function(e){return t(e)}))}(this.$refs.content.$el),this.blockWidth=this.leaves.map((function(e){return e.scrollWidth+32})).reduce((function(e,t){return e+t}))},collapseSection:function(e){var t=e.scrollHeight,n=e.style.transition;e.style.transition="",e.style.height=t+"px !important",e.style.paddingBottom="0px",requestAnimationFrame((function(){e.style.height=t+"px",e.style.transition=n,requestAnimationFrame((function(){e.style.height="0px",e.style.paddingBottom="0px"}))})),e.setAttribute("data-collapsed","true")},expandSection:function(e){var t=e.scrollHeight;e.style.height=t+"px",e.style.paddingBottom="5px",e.addEventListener("transitionend",(function(){e.removeEventListener("transitionend",this),"false"==e.getAttribute("data-collapsed")&&(e.style.height="auto")})),e.setAttribute("data-collapsed","false")},debounce:function(e,t,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||e.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,t);try{s&&e.apply(i,o)}catch(e){}}},calculateDimensions:function(){void 0!==this.$refs.container&&(this.open||(this.navHeight=this.$refs.container.$el.clientHeight),this.containerWidth=this.$refs.container.$el.clientWidth),void 0!==this.$refs.title&&(this.titleWidth=this.$refs.title.$el.clientWidth)},toggleAccordion:function(){this.open?(this.collapseSection(this.$refs.content.$el),this.open=!1):(this.expandSection(this.$refs.content.$el),this.open=!0)}},watch:{collapsed:function(e){e?(this.$refs.content.$el.style.height="0px",this.$refs.content.$el.style.paddingBottom="0px",this.$refs.content.$el.style.overflow="hidden"):(this.$refs.content.$el.style.height="50px",this.$refs.content.$el.style.paddingBottom="initial",this.$refs.content.$el.style.overflow="visible")}},computed:{collapsed:function(){return this.blockWidth>=this.collapseCutOff},collapseCutOff:function(){return this.containerWidth-this.titleWidth-30}}};var o,a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var s={};const l=i;var c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("navbar-container",{ref:"container",attrs:{flavor:e.flavor,fixed:e.fixed,collapsed:e.collapsed,"data-navbar":e._uid}},[n("navbar-title",{ref:"title"},[n("div",{staticClass:"navbar-brand",domProps:{innerHTML:e._s(e.title.html)}}),e._v(" "),e.title.text?n("a",{attrs:{href:e.title.url?e.title.url:"#"}},[e._v("\n      "+e._s(e.title.text)+"\n    ")]):e._e()]),e._v(" "),n("n-button",{directives:[{name:"show",rawName:"v-show",value:e.collapsed,expression:"collapsed"}],ref:"hamburger",staticClass:"nav-button",attrs:{flavor:e.flavor},on:{click:e.toggleAccordion}},[e._v("â˜°")]),e._v(" "),n("navbar-content-container",{ref:"content",attrs:{collapsed:e.collapsed}},[e._t("default")],2)],1)};c._withStripped=!0;const d=function(e,t,n,r,i,o,a,s,l,c){"boolean"!=typeof a&&(l=s,s=a,a=!1);var d,h="function"==typeof n?n.options:n;if(e&&e.render&&(h.render=e.render,h.staticRenderFns=e.staticRenderFns,h._compiled=!0,i&&(h.functional=!0)),r&&(h._scopeId=r),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},h._ssrRegister=d):t&&(d=a?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(h.functional){var u=h.render;h.render=function(e,t){return d.call(t),u(e,t)}}else{var f=h.beforeCreate;h.beforeCreate=f?[].concat(f,d):[d]}return n}({render:c,staticRenderFns:[]},(function(e){e&&e("data-v-c6c98a12_0",{source:"\n.navbar-brand {\r\n  display: inline-block;\r\n  padding-right: 5px;\n}\n.navbar-open-carat {\r\n  transform: rotate(135deg) !important;\r\n  margin-bottom: 4px;\n}\n.open {\r\n  max-height: 1980px !important;\n}\n.nav-button {\r\n  height: 37px;\r\n  margin-top: 0.4rem;\r\n  position: absolute;\r\n  right: 20px;\n}\r\n",map:{version:3,sources:["C:\\Users\\pedro\\Documents\\Personal Projects\\GitHub\\storybook\\src\\components\\Navbars\\RawNavbar\\src\\RawNavbar.vue"],names:[],mappings:";AA6SA;EACA,qBAAA;EACA,kBAAA;AACA;AACA;EACA,oCAAA;EACA,kBAAA;AACA;AACA;EACA,6BAAA;AACA;AACA;EACA,YAAA;EACA,kBAAA;EACA,kBAAA;EACA,WAAA;AACA",file:"RawNavbar.vue",sourcesContent:['<template>\r\n  <navbar-container\r\n    :flavor="flavor"\r\n    ref="container"\r\n    :fixed="fixed"\r\n    :collapsed="collapsed"\r\n    :data-navbar="_uid"\r\n  >\r\n    <navbar-title ref="title">\r\n      <div v-html="title.html" class="navbar-brand"></div>\r\n      <a v-if="title.text" :href="title.url ? title.url : \'#\'">\r\n        {{\r\n        title.text\r\n        }}\r\n      </a>\r\n    </navbar-title>\r\n    <n-button\r\n      class="nav-button"\r\n      v-show="collapsed"\r\n      :flavor="flavor"\r\n      @click="toggleAccordion"\r\n      ref="hamburger"\r\n    >&#9776;</n-button>\r\n    <navbar-content-container :collapsed="collapsed" ref="content">\r\n      <slot></slot>\r\n    </navbar-content-container>\r\n  </navbar-container>\r\n</template>\r\n<script>\r\nimport {\r\n  NavbarContainer,\r\n  NavbarTitle,\r\n  NavbarContentContainer\r\n} from "@IntusFacultas/navbar";\r\nimport { NButton } from "@IntusFacultas/button";\r\nexport const Navbar = {\r\n  components: {\r\n    NavbarContainer,\r\n    NavbarTitle,\r\n    NavbarContentContainer,\r\n    NButton\r\n  },\r\n  data: () => {\r\n    return {\r\n      open: false,\r\n      contentWidth: 0,\r\n      containerWidth: 0,\r\n      navHeight: 0,\r\n      observer: null,\r\n      titleWidth: 0,\r\n      blockWidth: 0,\r\n      leaves: []\r\n    };\r\n  },\r\n  mounted() {\r\n    let self = this;\r\n    this.calculateDimensions();\r\n    window.addEventListener(\r\n      "resize",\r\n      this.debounce(this.calculateDimensions, 10, true),\r\n      {\r\n        passive: true\r\n      }\r\n    );\r\n    this.calculateContentWidth();\r\n    this.observer = new MutationObserver(this.calculateContentWidth);\r\n    this.observer.observe(this.$refs.content.$el, {\r\n      childList: true,\r\n      characterData: true,\r\n      subtree: true\r\n    });\r\n    window.addEventListener("click", self.checkOffclick);\r\n  },\r\n  beforeDestroy() {\r\n    let self = this;\r\n    this.observer.disconnect();\r\n    window.removeEventListener("click", self.checkOffclick);\r\n    window.removeEventListener(\r\n      "resize",\r\n      this.debounce(this.calculateDimensions, 10, true)\r\n    );\r\n  },\r\n  updated() {\r\n    this.calculateDimensions();\r\n  },\r\n  props: {\r\n    title: {\r\n      type: Object,\r\n      default: () => {\r\n        return {\r\n          text: "Brand",\r\n          url: "#",\r\n          html: ""\r\n        };\r\n      }\r\n    },\r\n    fixed: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    flavor: {\r\n      type: String,\r\n      default: ""\r\n    }\r\n  },\r\n  methods: {\r\n    calculateContentWidth() {\r\n      let self = this;\r\n      function findBlockElement(elem) {\r\n        const INLINE_ELEMENTS = [\r\n          "a",\r\n          "abbr",\r\n          "acronym",\r\n          "b",\r\n          "bdo",\r\n          "big",\r\n          "br",\r\n          "button",\r\n          "cite",\r\n          "code",\r\n          "dfn",\r\n          "em",\r\n          "i",\r\n          "img",\r\n          "input",\r\n          "kbd",\r\n          "label",\r\n          "map",\r\n          "object",\r\n          "output",\r\n          "q",\r\n          "samp",\r\n          "script",\r\n          "select",\r\n          "small",\r\n          "span",\r\n          "strong",\r\n          "sub",\r\n          "sup",\r\n          "textarea",\r\n          "time",\r\n          "tt",\r\n          "var"\r\n        ];\r\n        if (INLINE_ELEMENTS.indexOf(elem.tagName.toLowerCase()) != -1) {\r\n          return elem;\r\n        }\r\n        for (let child of elem.children) {\r\n          if (INLINE_ELEMENTS.indexOf(child.tagName.toLowerCase()) != -1) {\r\n            return child;\r\n          }\r\n          for (let subchild of child.children) {\r\n            let potentialChild = findBlockElement(subchild);\r\n            if (potentialChild != null) {\r\n              return potentialChild;\r\n            }\r\n          }\r\n        }\r\n        return null;\r\n      }\r\n      function stepChildren(elem) {\r\n        if (elem.tagName.toUpperCase() == "LI") {\r\n          elem.children.forEach(child =>\r\n            self.leaves.push(findBlockElement(child))\r\n          );\r\n        } else {\r\n          elem.children.forEach(child => stepChildren(child));\r\n        }\r\n      }\r\n      stepChildren(this.$refs.content.$el);\r\n      this.blockWidth = this.leaves\r\n        .map(a => a.scrollWidth + 32)\r\n        .reduce((accum, val) => accum + val);\r\n    },\r\n    collapseSection(element) {\r\n      // pulled from https://css-tricks.com/using-css-transitions-auto-dimensions/ and modified\r\n      // get the height of the element\'s inner content, regardless of its actual size\r\n      let sectionHeight = element.scrollHeight;\r\n      // temporarily disable all css transitions\r\n      var elementTransition = element.style.transition;\r\n      element.style.transition = "";\r\n      element.style.height = sectionHeight + "px !important";\r\n      element.style.paddingBottom = "0px";\r\n      // element.style.width = sectionWidth + "px !important";\r\n\r\n      // on the next frame (as soon as the previous style change has taken effect),\r\n      // explicitly set the element\'s height to its current pixel height, so we\r\n      // aren\'t transitioning out of \'auto\'\r\n      requestAnimationFrame(function() {\r\n        element.style.height = sectionHeight + "px";\r\n        // element.style.width = sectionWidth + "px";\r\n        element.style.transition = elementTransition;\r\n        // element.style.overflowY = \'hidden\';\r\n\r\n        // on the next frame (as soon as the previous style change has taken effect),\r\n        // have the element transition to height: 0\r\n        requestAnimationFrame(function() {\r\n          element.style.height = 0 + "px";\r\n          // element.style.width = "0px";\r\n          element.style.paddingBottom = "0px";\r\n        });\r\n      });\r\n\r\n      // mark the section as "currently collapsed"\r\n      element.setAttribute("data-collapsed", "true");\r\n    },\r\n    expandSection(element) {\r\n      // pulled from https://css-tricks.com/using-css-transitions-auto-dimensions/ and modified\r\n      // get the height of the element\'s inner content, regardless of its actual size\r\n      let sectionHeight = element.scrollHeight;\r\n      // have the element transition to the height of its inner content\r\n      element.style.height = sectionHeight + "px";\r\n      // element.style.width = sectionWidth + "px";\r\n\r\n      element.style.paddingBottom = "5px";\r\n      // element.style.overflowY = "auto"\r\n      // when the next css transition finishes (which should be the one we just triggered)\r\n      element.addEventListener("transitionend", function() {\r\n        // remove this event listener so it only gets triggered once\r\n        element.removeEventListener("transitionend", this);\r\n        if (element.getAttribute("data-collapsed") == "false") {\r\n          // remove "height" from the element\'s inline styles, so it can return to its initial value\r\n          element.style.height = "auto";\r\n        }\r\n      });\r\n\r\n      // mark the section as "currently not collapsed"\r\n      element.setAttribute("data-collapsed", "false");\r\n    },\r\n    debounce(func, wait, immediate) {\r\n      /**\r\n       * Pulled from: https://davidwalsh.name/javascript-debounce-function\r\n       */\r\n      var timeout;\r\n      return function() {\r\n        var context = this,\r\n          args = arguments;\r\n        var later = function() {\r\n          timeout = null;\r\n          if (!immediate) func.apply(context, args);\r\n        };\r\n        var callNow = immediate && !timeout;\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(later, wait);\r\n        try {\r\n          if (callNow) func.apply(context, args);\r\n        } catch {\r\n          // pass\r\n        }\r\n      };\r\n    },\r\n    calculateDimensions() {\r\n      if (typeof this.$refs.container != "undefined") {\r\n        if (!this.open) {\r\n          this.navHeight = this.$refs.container.$el.clientHeight;\r\n        }\r\n        this.containerWidth = this.$refs.container.$el.clientWidth;\r\n      }\r\n      if (typeof this.$refs.title != "undefined") {\r\n        this.titleWidth = this.$refs.title.$el.clientWidth;\r\n      }\r\n    },\r\n    toggleAccordion() {\r\n      if (!this.open) {\r\n        this.expandSection(this.$refs.content.$el);\r\n        this.open = true;\r\n      } else {\r\n        this.collapseSection(this.$refs.content.$el);\r\n        this.open = false;\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    collapsed(newVal) {\r\n      if (newVal) {\r\n        this.$refs.content.$el.style.height = "0px";\r\n        // this.$refs.content.$el.style.width =  "0px";\r\n        this.$refs.content.$el.style.paddingBottom = "0px";\r\n        this.$refs.content.$el.style.overflow = "hidden";\r\n      } else {\r\n        this.$refs.content.$el.style.height = "50px";\r\n        // this.$refs.content.$el.style.width = "initial";\r\n        this.$refs.content.$el.style.paddingBottom = "initial";\r\n        this.$refs.content.$el.style.overflow = "visible";\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    collapsed() {\r\n      return this.blockWidth >= this.collapseCutOff;\r\n    },\r\n    collapseCutOff() {\r\n      let additionalPadding = 30;\r\n      return this.containerWidth - this.titleWidth - additionalPadding;\r\n    }\r\n  }\r\n};\r\nexport default Navbar;\r\n<\/script>\r\n\r\n<style>\r\n.navbar-brand {\r\n  display: inline-block;\r\n  padding-right: 5px;\r\n}\r\n.navbar-open-carat {\r\n  transform: rotate(135deg) !important;\r\n  margin-bottom: 4px;\r\n}\r\n.open {\r\n  max-height: 1980px !important;\r\n}\r\n.nav-button {\r\n  height: 37px;\r\n  margin-top: 0.4rem;\r\n  position: absolute;\r\n  right: 20px;\r\n}\r\n</style>\r\n']},media:void 0})}),l,void 0,!1,void 0,!1,(function(e){return function(e,t){return function(e,t){var n=a?t.media||"default":e,r=s[n]||(s[n]={ids:new Set,styles:[]});if(!r.ids.has(e)){r.ids.add(e);var i=t.source;if(t.map&&(i+="\n/*# sourceURL="+t.map.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),r.element||(r.element=document.createElement("style"),r.element.type="text/css",t.media&&r.element.setAttribute("media",t.media),void 0===o&&(o=document.head||document.getElementsByTagName("head")[0]),o.appendChild(r.element)),"styleSheet"in r.element)r.styles.push(i),r.element.styleSheet.cssText=r.styles.filter(Boolean).join("\n");else{var l=r.ids.size-1,c=document.createTextNode(i),d=r.element.childNodes;d[l]&&r.element.removeChild(d[l]),d.length?r.element.insertBefore(c,d[l]):r.element.appendChild(c)}}}(e,t)}}),void 0,void 0);var h=function(e){h.installed||(h.installed=!0,e.component("RawNavbar",d))},u={install:h},f=null;"undefined"!=typeof window?f=window.Vue:"undefined"!=typeof global&&(f=global.Vue),f&&f.use(u),d.install=h;export default d;export{d as RawNavbar};
