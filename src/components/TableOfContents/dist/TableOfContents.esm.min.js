import e from"vue-styled-components";import{TextTheme as r}from"@IntusFacultas/design-system";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}function i(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],t=!0,i=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(t=(l=s.next()).done)&&(n.push(l.value),!r||n.length!==r);t=!0);}catch(e){i=!0,o=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(){var e=t(["\n  padding-left: ","px;\n  border-left-style: solid;\n  border-left-width: 2px;\n  font-size: 14px;\n  cursor: pointer;\n  transition: 0.2s all;\n  max-height: 0px;\n  overflow: hidden;\n  border-color: rgba(0, 0, 0, 0.1);\n  color: ",";\n  ",";\n"]);return o=function(){return e},e}function l(){var e=t(['\n  & * {\n    font-family: "Open Sans Regular", -apple-system, BlinkMacSystemFont,\n      "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif,\n      "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    -webkit-touch-callout: none; /* iOS Safari */\n    -webkit-user-select: none; /* Safari */\n    -khtml-user-select: none; /* Konqueror HTML */\n    -moz-user-select: none; /* Firefox */\n    -ms-user-select: none; /* Internet Explorer/Edge */\n    user-select: none;\n  }\n  padding-left: 0px;\n  list-style: none;\n']);return l=function(){return e},e}function s(){var e=t(["\n  display: block;\n  max-width: ",";\n"]);return s=function(){return e},e}function a(){var e=t(["\n  color: #ff7200;\n  font-size: 16px;\n  font-weight: bold;\n  cursor: pointer;\n  pointer-events: none;\n"]);return a=function(){return e},e}var c,u,f,d;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Array.from||(Array.from=(c=Object.prototype.toString,u=function(e){return"function"==typeof e||"[object Function]"===c.call(e)},f=Math.pow(2,53)-1,d=function(e){var r=function(e){var r=Number(e);return isNaN(r)?0:0!==r&&isFinite(r)?(r>0?1:-1)*Math.floor(Math.abs(r)):r}(e);return Math.min(Math.max(r,0),f)},function(e){var r=this,n=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var t,i=arguments.length>1?arguments[1]:void 0;if(void 0!==i){if(!u(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(t=arguments[2])}for(var o,l=d(n.length),s=u(r)?Object(new r(l)):new Array(l),a=0;a<l;)o=n[a],s[a]=i?void 0===t?i(o,a):i.call(t,o,a):o,a+=1;return s.length=l,s}));var p,h,m,v={padding:{type:Number,default:0},breakpoint:{type:Number,default:576},topOffset:{type:Number,default:100},width:{type:String,default:"auto"},textTheme:{type:Object,default:function(){return r}},flavor:String},g=e.span(a()),b=e("nav",v)(s(),(function(e){return e.width?e.width:"auto"})),y=e("ul",v)(l()),w=e("li",v)(o(),(function(e){return 10*e.padding+10}),(function(e){return e.dark?e.textTheme.Dark.color:e.textTheme.Normal.color}),(function(e){return e.flavor&&e.textTheme[e.flavor]?"color "+e.textTheme[e.flavor].color:""})),T=(p={components:{ContentsTable:y,Item:w,ContentsContainer:b,Toggler:g},data:function(){return{titles:[],override:!1,scrollToOverride:!1,observer:null}},props:{width:{type:String,default:"auto"},enableDomListening:{type:Boolean,default:!1},flavor:{type:String,default:""},ignoreQuery:{type:[String,Array],default:""},queryOverride:{type:String,default:""},offset:{type:Number,default:0}},methods:{toggleOverride:function(){this.override=!this.override;var e=!0,r=!1,n=void 0;try{for(var t,i=this.titles[Symbol.iterator]();!(e=(t=i.next()).done);e=!0)t.value.override=this.override}catch(e){r=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(r)throw n}}},delayCollapse:function(e){setTimeout((function(){return e.override=!1}),500)},scrollToEl:function(e){var r=e.getBoundingClientRect().top+window.pageYOffset-this.offset;window.scrollTo({top:r-5,behavior:"smooth"}),this.scrollToOverride=!0;var n=this;setTimeout((function(){setTimeout((function(){n.checkTitles()}),100),n.scrollToOverride=!1}),500),e.focus()},debounce:function(e,r,n){var t;return function(){var i=this,o=arguments,l=function(){t=null,n||e.apply(i,o)},s=n&&!t;clearTimeout(t),t=setTimeout(l,r),s&&e.apply(i,o)}},computeOverride:function(e){return!this.scrollToOverride&&this.override||e.override||e.children.filter((function(e){return e.override})).length>0||e.parents.filter((function(e){return e.override})).length>0},computeScreenVisibility:function(e){return!this.scrollToOverride&&(e.visible||e.children.filter((function(e){return e.visible})).length>0)},computeVisibility:function(e){return 0==e.parents.length||1==e.directParents.length&&1==e.parents.length&&this.computeScreenVisibility(e.directParents[0])||this.computeOverride(e)||this.computeScreenVisibility(e)},margined:function(e){return e.visible},isInView:function(e){var r=e.getBoundingClientRect();return r.top<window.innerHeight&&r.bottom>=0},getPathTo:function(e){if(""!==e.id)return'id("'+e.id+'")';if(e===document.body)return e.tagName;for(var r=0,n=e.parentNode.childNodes,t=0;t<n.length;t++){var i=n[t];if(i===e)return this.getPathTo(e.parentNode)+"/"+e.tagName+"["+(r+1)+"]";1===i.nodeType&&i.tagName===e.tagName&&r++}},checkIfTitle:function(e){var r=!0;if(this.ignoreQuery)if(Array.isArray(this.ignoreQuery)){var n=!0,t=!1,i=void 0;try{for(var o,l=this.ignoreQuery[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=o.value;if(e.matches(s)){r=!1;break}}}catch(e){t=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(t)throw i}}}else r=!e.matches(this.ignoreQuery);return this.queryOverride?e.matches(this.queryOverride)&&r:e.matches("h1, h2, h3, h4, h5, h6")&&r},calculateTitleType:function(e){return this.queryOverride?e.getAttribute("data-rank"):parseInt(e.tagName[1])},crawl:function(e){for(var r=this,n=[],t=[e],i=[],o=function(){var e=t.pop();if(void 0!==e.children){var o=!0,l=!1,s=void 0;try{for(var a,c=Array.from(e.children).filter((function(r){return-1==i.indexOf(r)&&!r.isEqualNode(e)}))[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var u=a.value;t.push(u)}}catch(e){l=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(l)throw s}}}var f=r.getPathTo(e),d=-1==i.indexOf(f),p=r.checkIfTitle(e);d&&p&&n.push({el:e,id:r.getPathTo(e),titleType:r.calculateTitleType(e),offset:-1,visible:!1,hovered:!1,override:!1}),i.push(r.getPathTo(e))};t.length>0;)o();return n.reverse()},checkTitles:function(){var e=window.pageYOffset;if(0!=this.titles.length){var r=!0,n=!1,t=void 0;try{for(var o,l=this.titles.entries()[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var s=i(o.value,2),a=s[0],c=s[1];if(c.offset=c.el.getBoundingClientRect().top,c.offset<20+this.offset&&c.offset>0){var u=!0,f=!1,d=void 0;try{for(var p,h=this.titles.filter((function(e){return e.visible}))[Symbol.iterator]();!(u=(p=h.next()).done);u=!0)p.value.visible=!1}catch(e){f=!0,d=e}finally{try{u||null==h.return||h.return()}finally{if(f)throw d}}c.visible=!0}else c.visible&&c.el.getBoundingClientRect().bottom>=(window.innerHeight||document.documentElement.clientHeight)&&(this.titles[a-1]&&(this.titles[a-1].visible=!0),c.visible=!1)}}catch(e){n=!0,t=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw t}}if(0==e&&window.innerWidth-document.documentElement.clientWidth==0){var m=!0,v=!1,g=void 0;try{for(var b,y=this.titles.filter((function(e){return e.visible}))[Symbol.iterator]();!(m=(b=y.next()).done);m=!0)b.value.visible=!1}catch(e){v=!0,g=e}finally{try{m||null==y.return||y.return()}finally{if(v)throw g}}this.titles[0].visible=!0}else if(window.innerHeight+e>=document.body.offsetHeight){var w=!0,T=!1,x=void 0;try{for(var S,O=this.titles.filter((function(e){return e.visible}))[Symbol.iterator]();!(w=(S=O.next()).done);w=!0)S.value.visible=!1}catch(e){T=!0,x=e}finally{try{w||null==O.return||O.return()}finally{if(T)throw x}}this.titles[this.titles.length-1].visible=!0}}},assignChildren:function(){for(var e=this,r=0;r<this.titles.length;r++){var n=this.titles[r];n.children||(n.children=[]),n.parents||(n.parents=[]),n.directParents||(n.directParents=[]);for(var t=r+1;t<this.titles.length;t++){var i=this.titles[t];if(!(i.titleType>n.titleType))break;n.children.push(i),i.parents||(i.parents=[]),i.directParents||(i.directParents=[]),i.parents.push(n)}}var o=!0,l=!1,s=void 0;try{for(var a,c=function(){var r=a.value;1==r.parents.length&&r.directParents.push(r.parents[0]),0==r.parents.length?r.siblings=[]:r.siblings=e.titles.filter((function(e){return e.parents.filter((function(e){return e.id==r.parents[0].id})).length>0&&e.parents.length==r.parents.length&&e.id!=r.id}))},u=this.titles[Symbol.iterator]();!(o=(a=u.next()).done);o=!0)c()}catch(e){l=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(l)throw s}}},updateTitles:function(){this.titles=this.crawl(document.getElementsByTagName("body")[0]),this.assignChildren(),this.checkTitles()},updateTitlesOnDOMChange:function(e){var r=!0,n=!1,t=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done);r=!0)"childList"===i.value.type&&this.updateTitles()}catch(e){n=!0,t=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw t}}}},beforeDestroy:function(){this.observer.disconnect()},mounted:function(){var e=document.getElementsByTagName("body")[0];this.enableDomListening?(this.observer=new MutationObserver(this.updateTitlesOnDOMChange),this.observer.observe(e,{attributes:!1,childList:!0,subtree:!1})):(!function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(e,r){r=r||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,r.bubbles,r.cancelable,r.detail),n}}(),window.addEventListener("IntusFacultas-table-of-contents",this.updateTitles)),this.updateTitles(),window.addEventListener("scroll",this.checkTitles),function(){function e(){var e=window,r=document;if(!("scrollBehavior"in r.documentElement.style&&!0!==e.__forceSmoothScrollPolyfill__)){var t,i=e.HTMLElement||e.Element,o={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:i.prototype.scroll||a,scrollIntoView:i.prototype.scrollIntoView},l=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now,s=(t=e.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(t)?1:0);e.scroll=e.scrollTo=function(){void 0!==arguments[0]&&(!0!==c(arguments[0])?m.call(e,r.body,void 0!==arguments[0].left?~~arguments[0].left:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:e.scrollY||e.pageYOffset):o.scroll.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!==n(arguments[0])?arguments[0]:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:e.scrollY||e.pageYOffset))},e.scrollBy=function(){void 0!==arguments[0]&&(c(arguments[0])?o.scrollBy.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!==n(arguments[0])?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):m.call(e,r.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset)))},i.prototype.scroll=i.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==c(arguments[0])){var e=arguments[0].left,r=arguments[0].top;m.call(this,this,void 0===e?this.scrollLeft:~~e,void 0===r?this.scrollTop:~~r)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");o.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!==n(arguments[0])?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},i.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==c(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):o.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},i.prototype.scrollIntoView=function(){if(!0!==c(arguments[0])){var n=p(this),t=n.getBoundingClientRect(),i=this.getBoundingClientRect();n!==r.body?(m.call(this,n,n.scrollLeft+i.left-t.left,n.scrollTop+i.top-t.top),"fixed"!==e.getComputedStyle(n).position&&e.scrollBy({left:t.left,top:t.top,behavior:"smooth"})):e.scrollBy({left:i.left,top:i.top,behavior:"smooth"})}else o.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function a(e,r){this.scrollLeft=e,this.scrollTop=r}function c(e){if(null===e||"object"!==n(e)||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"===n(e)&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function u(e,r){return"Y"===r?e.clientHeight+s<e.scrollHeight:"X"===r?e.clientWidth+s<e.scrollWidth:void 0}function f(r,n){var t=e.getComputedStyle(r,null)["overflow"+n];return"auto"===t||"scroll"===t}function d(e){var r=u(e,"Y")&&f(e,"Y"),n=u(e,"X")&&f(e,"X");return r||n}function p(e){for(;e!==r.body&&!1===d(e);)e=e.parentNode||e.host;return e}function h(r){var n,t,i,o,s=(l()-r.startTime)/468;o=s=s>1?1:s,n=.5*(1-Math.cos(Math.PI*o)),t=r.startX+(r.x-r.startX)*n,i=r.startY+(r.y-r.startY)*n,r.method.call(r.scrollable,t,i),t===r.x&&i===r.y||e.requestAnimationFrame(h.bind(e,r))}function m(n,t,i){var s,c,u,f,d=l();n===r.body?(s=e,c=e.scrollX||e.pageXOffset,u=e.scrollY||e.pageYOffset,f=o.scroll):(s=n,c=n.scrollLeft,u=n.scrollTop,f=a),h({scrollable:s,method:f,startTime:d,startX:c,startY:u,x:t,y:i})}}"object"===("undefined"==typeof exports?"undefined":n(exports))&&"undefined"!=typeof module?module.exports={polyfill:e}:e()}()}},m=function(){this.enableDomListening||window.removeEventListener("IntusFacultas-table-of-contents",this.updateTitles),window.removeEventListener("scroll",this.checkTitles)},(h="beforeDestroy")in p?Object.defineProperty(p,h,{value:m,enumerable:!0,configurable:!0,writable:!0}):p[h]=m,p);var x,S="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var O={};const E=T;var A=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("contents-container",{attrs:{width:e.width}},[n("contents-table",[n("item",{staticClass:"visible-title table-of-contents-title",attrs:{flavor:e.flavor,tabindex:"0"},on:{click:e.toggleOverride,keyup:[function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"space",32,r.key,[" ","Spacebar"])?null:e.toggleOverride(r)},function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.toggleOverride(r)}]}},[e._v("\n      Table of Contents\n      "),e.override?n("toggler",[e._v("−")]):n("toggler",[e._v("+")])],1),e._v(" "),e._l(e.titles,(function(r){return n("item",{key:r.id,class:{"active-title":r.visible,"margined-title":e.margined(r),"visible-title":e.computeVisibility(r)},attrs:{flavor:r.visible?"MissileOrange":e.flavor,tabindex:e.computeVisibility(r)?0:-1,padding:r.titleType-1},on:{click:function(n){return e.scrollToEl(r.el)},keyup:[function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"space",32,n.key,[" ","Spacebar"])?null:e.scrollToEl(r.el)},function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.scrollToEl(r.el)}]}},[e._v(e._s(r.el.innerText))])}))],2)],1)};A._withStripped=!0;const C=function(e,r,n,t,i,o,l,s,a,c){"boolean"!=typeof l&&(a=s,s=l,l=!1);var u,f="function"==typeof n?n.options:n;if(e&&e.render&&(f.render=e.render,f.staticRenderFns=e.staticRenderFns,f._compiled=!0,i&&(f.functional=!0)),t&&(f._scopeId=t),o?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,a(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},f._ssrRegister=u):r&&(u=l?function(e){r.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){r.call(this,s(e))}),u)if(f.functional){var d=f.render;f.render=function(e,r){return u.call(r),d(e,r)}}else{var p=f.beforeCreate;f.beforeCreate=p?[].concat(p,u):[u]}return n}({render:A,staticRenderFns:[]},(function(e){e&&e("data-v-5117a510_0",{source:"\n.visible-title {\r\n  max-height: 100px !important;\r\n  padding-bottom: 2px;\r\n  padding-top: 2px;\n}\n.margined-title {\r\n  border-left-style: solid;\r\n  border-left-width: 3px;\r\n  border-left-color: #ff7200 !important;\n}\n.active-title {\r\n  font-weight: bold;\n}\n.table-of-contents-title {\r\n  font-size: 16px;\n}\r\n",map:{version:3,sources:["C:\\Users\\pedro\\Documents\\Personal Projects\\GitHub\\storybook\\src\\components\\TableOfContents\\src\\TableOfContents.vue"],names:[],mappings:";AAu+BA;EACA,4BAAA;EACA,mBAAA;EACA,gBAAA;AACA;AACA;EACA,wBAAA;EACA,sBAAA;EACA,qCAAA;AACA;AACA;EACA,iBAAA;AACA;AACA;EACA,eAAA;AACA",file:"TableOfContents.vue",sourcesContent:['<template>\r\n  <contents-container :width="width">\r\n    <contents-table>\r\n      <item\r\n        :flavor="flavor"\r\n        tabindex="0"\r\n        class="visible-title table-of-contents-title"\r\n        @click="toggleOverride"\r\n        @keyup.space="toggleOverride"\r\n        @keyup.enter="toggleOverride"\r\n      >\r\n        Table of Contents\r\n        <toggler v-if="!override">&#43;</toggler>\r\n        <toggler v-else>&#8722;</toggler>\r\n      </item>\r\n      <item\r\n        :flavor="title.visible ? \'MissileOrange\' : flavor"\r\n        :tabindex="computeVisibility(title) ? 0 : -1"\r\n        v-for="title in titles"\r\n        :key="title.id"\r\n        :padding="title.titleType - 1"\r\n        :class="{\r\n          \'active-title\': title.visible,\r\n          \'margined-title\': margined(title),\r\n          \'visible-title\': computeVisibility(title),\r\n        }"\r\n        @click="scrollToEl(title.el)"\r\n        @keyup.space="scrollToEl(title.el)"\r\n        @keyup.enter="scrollToEl(title.el)"\r\n        >{{ title.el.innerText }}</item\r\n      >\r\n    </contents-table>\r\n  </contents-container>\r\n</template>\r\n\r\n<script>\r\nimport styled from "vue-styled-components";\r\nimport { TextTheme } from "@IntusFacultas/design-system";\r\nif (!Element.prototype.matches) {\r\n  Element.prototype.matches =\r\n    Element.prototype.msMatchesSelector ||\r\n    Element.prototype.webkitMatchesSelector;\r\n}\r\n\r\nif (!Array.from) {\r\n  Array.from = (function () {\r\n    var toStr = Object.prototype.toString;\r\n    var isCallable = function (fn) {\r\n      return typeof fn === "function" || toStr.call(fn) === "[object Function]";\r\n    };\r\n    var toInteger = function (value) {\r\n      var number = Number(value);\r\n      if (isNaN(number)) {\r\n        return 0;\r\n      }\r\n      if (number === 0 || !isFinite(number)) {\r\n        return number;\r\n      }\r\n      return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\r\n    };\r\n    var maxSafeInteger = Math.pow(2, 53) - 1;\r\n    var toLength = function (value) {\r\n      var len = toInteger(value);\r\n      return Math.min(Math.max(len, 0), maxSafeInteger);\r\n    };\r\n\r\n    // The length property of the from method is 1.\r\n    return function from(arrayLike /*, mapFn, thisArg */) {\r\n      // 1. Let C be the this value.\r\n      var C = this;\r\n\r\n      // 2. Let items be ToObject(arrayLike).\r\n      var items = Object(arrayLike);\r\n\r\n      // 3. ReturnIfAbrupt(items).\r\n      if (arrayLike == null) {\r\n        throw new TypeError(\r\n          "Array.from requires an array-like object - not null or undefined"\r\n        );\r\n      }\r\n\r\n      // 4. If mapfn is undefined, then let mapping be false.\r\n      var mapFn = arguments.length > 1 ? arguments[1] : void undefined;\r\n      var T;\r\n      if (typeof mapFn !== "undefined") {\r\n        // 5. else\r\n        // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.\r\n        if (!isCallable(mapFn)) {\r\n          throw new TypeError(\r\n            "Array.from: when provided, the second argument must be a function"\r\n          );\r\n        }\r\n\r\n        // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.\r\n        if (arguments.length > 2) {\r\n          T = arguments[2];\r\n        }\r\n      }\r\n\r\n      // 10. Let lenValue be Get(items, "length").\r\n      // 11. Let len be ToLength(lenValue).\r\n      var len = toLength(items.length);\r\n\r\n      // 13. If IsConstructor(C) is true, then\r\n      // 13. a. Let A be the result of calling the [[Construct]] internal method\r\n      // of C with an argument list containing the single item len.\r\n      // 14. a. Else, Let A be ArrayCreate(len).\r\n      var A = isCallable(C) ? Object(new C(len)) : new Array(len);\r\n\r\n      // 16. Let k be 0.\r\n      var k = 0;\r\n      // 17. Repeat, while k < len… (also steps a - h)\r\n      var kValue;\r\n      while (k < len) {\r\n        kValue = items[k];\r\n        if (mapFn) {\r\n          A[k] =\r\n            typeof T === "undefined"\r\n              ? mapFn(kValue, k)\r\n              : mapFn.call(T, kValue, k);\r\n        } else {\r\n          A[k] = kValue;\r\n        }\r\n        k += 1;\r\n      }\r\n      // 18. Let putStatus be Put(A, "length", len, true).\r\n      A.length = len;\r\n      // 20. Return A.\r\n      return A;\r\n    };\r\n  })();\r\n}\r\n\r\nconst props = {\r\n  padding: {\r\n    type: Number,\r\n    default: 0,\r\n  },\r\n  breakpoint: {\r\n    type: Number,\r\n    default: 576,\r\n  },\r\n  topOffset: {\r\n    type: Number,\r\n    default: 100,\r\n  },\r\n  width: {\r\n    type: String,\r\n    default: "auto",\r\n  },\r\n  textTheme: {\r\n    type: Object,\r\n    default: function () {\r\n      return TextTheme;\r\n    },\r\n  },\r\n  flavor: String,\r\n};\r\nconst Toggler = styled.span`\r\n  color: #ff7200;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  pointer-events: none;\r\n`;\r\nconst ContentsContainer = styled("nav", props)`\r\n  display: block;\r\n  max-width: ${(props) => (props.width ? props.width : "auto")};\r\n`;\r\nconst ContentsTable = styled("ul", props)`\r\n  & * {\r\n    font-family: "Open Sans Regular", -apple-system, BlinkMacSystemFont,\r\n      "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif,\r\n      "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\r\n    -webkit-touch-callout: none; /* iOS Safari */\r\n    -webkit-user-select: none; /* Safari */\r\n    -khtml-user-select: none; /* Konqueror HTML */\r\n    -moz-user-select: none; /* Firefox */\r\n    -ms-user-select: none; /* Internet Explorer/Edge */\r\n    user-select: none;\r\n  }\r\n  padding-left: 0px;\r\n  list-style: none;\r\n`;\r\n\r\nconst Item = styled("li", props)`\r\n  padding-left: ${(props) => props.padding * 10 + 10}px;\r\n  border-left-style: solid;\r\n  border-left-width: 2px;\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n  transition: 0.2s all;\r\n  max-height: 0px;\r\n  overflow: hidden;\r\n  border-color: rgba(0, 0, 0, 0.1);\r\n  color: ${(props) =>\r\n    props.dark ? props.textTheme.Dark.color : props.textTheme.Normal.color};\r\n  ${(props) =>\r\n    props.flavor\r\n      ? props.textTheme[props.flavor]\r\n        ? "color " + props.textTheme[props.flavor].color\r\n        : ""\r\n      : ""};\r\n`;\r\n\r\nexport const TableOfContents = {\r\n  components: { ContentsTable, Item, ContentsContainer, Toggler },\r\n  data() {\r\n    return {\r\n      titles: [],\r\n      override: false,\r\n      scrollToOverride: false,\r\n      observer: null,\r\n    };\r\n  },\r\n  props: {\r\n    width: {\r\n      type: String,\r\n      default: "auto",\r\n    },\r\n    enableDomListening: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    flavor: {\r\n      type: String,\r\n      default: "",\r\n    },\r\n    ignoreQuery: {\r\n      type: [String, Array],\r\n      default: "",\r\n    },\r\n    queryOverride: {\r\n      type: String,\r\n      default: "",\r\n    },\r\n    offset: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n  },\r\n  methods: {\r\n    toggleOverride() {\r\n      this.override = !this.override;\r\n      for (let title of this.titles) {\r\n        title.override = this.override;\r\n      }\r\n    },\r\n    delayCollapse(title) {\r\n      setTimeout(() => (title.override = false), 500);\r\n    },\r\n    scrollToEl(el) {\r\n      const y =\r\n        el.getBoundingClientRect().top + window.pageYOffset - this.offset;\r\n      // el.scrollIntoView({ behavior: "smooth", block: "start" });\r\n      let IEHoldOff = 5; // IE is dumb and can\'t appropriately calculate viewport\r\n      window.scrollTo({ top: y - IEHoldOff, behavior: "smooth" });\r\n      this.scrollToOverride = true;\r\n      let self = this;\r\n      setTimeout(function () {\r\n        setTimeout(() => {\r\n          self.checkTitles();\r\n        }, 100);\r\n        self.scrollToOverride = false;\r\n      }, 500);\r\n      el.focus();\r\n    },\r\n    debounce(func, wait, immediate) {\r\n      // pulled from https://davidwalsh.name/javascript-debounce-function\r\n      var timeout;\r\n      return function () {\r\n        var context = this,\r\n          args = arguments;\r\n        var later = function () {\r\n          timeout = null;\r\n          if (!immediate) func.apply(context, args);\r\n        };\r\n        var callNow = immediate && !timeout;\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(later, wait);\r\n        if (callNow) func.apply(context, args);\r\n      };\r\n    },\r\n    computeOverride(title) {\r\n      return (\r\n        (!this.scrollToOverride && this.override) ||\r\n        title.override ||\r\n        title.children.filter((child) => child.override).length > 0 ||\r\n        title.parents.filter((parent) => parent.override).length > 0\r\n      );\r\n    },\r\n    computeScreenVisibility(title) {\r\n      return (\r\n        !this.scrollToOverride &&\r\n        (title.visible ||\r\n          title.children.filter((child) => child.visible).length > 0)\r\n      );\r\n    },\r\n    computeVisibility(title) {\r\n      return (\r\n        title.parents.length == 0 ||\r\n        (title.directParents.length == 1 &&\r\n          title.parents.length == 1 &&\r\n          this.computeScreenVisibility(title.directParents[0])) ||\r\n        this.computeOverride(title) ||\r\n        this.computeScreenVisibility(title)\r\n      );\r\n    },\r\n    margined(title) {\r\n      return title.visible; //|| title.children.filter(child => child.visible).length > 0\r\n    },\r\n    isInView(el) {\r\n      // pulled from https://stackoverflow.com/questions/123999/how-can-i-tell-if-a-dom-element-is-visible-in-the-current-viewport\r\n      let box = el.getBoundingClientRect();\r\n      return box.top < window.innerHeight && box.bottom >= 0;\r\n    },\r\n    getPathTo(element) {\r\n      // pulled from https://stackoverflow.com/questions/2631820/how-do-i-ensure-saved-click-coordinates-can-be-reloaed-to-the-same-place-even-i/2631931#2631931\r\n      if (element.id !== "") return \'id("\' + element.id + \'")\';\r\n      if (element === document.body) return element.tagName;\r\n\r\n      var ix = 0;\r\n      var siblings = element.parentNode.childNodes;\r\n      for (var i = 0; i < siblings.length; i++) {\r\n        var sibling = siblings[i];\r\n        if (sibling === element)\r\n          return (\r\n            this.getPathTo(element.parentNode) +\r\n            "/" +\r\n            element.tagName +\r\n            "[" +\r\n            (ix + 1) +\r\n            "]"\r\n          );\r\n        if (sibling.nodeType === 1 && sibling.tagName === element.tagName) ix++;\r\n      }\r\n    },\r\n    checkIfTitle(el) {\r\n      let notDisqualified = true;\r\n      if (this.ignoreQuery) {\r\n        if (Array.isArray(this.ignoreQuery)) {\r\n          for (let query of this.ignoreQuery) {\r\n            if (el.matches(query)) {\r\n              notDisqualified = false;\r\n              break;\r\n            }\r\n          }\r\n        } else {\r\n          notDisqualified = !el.matches(this.ignoreQuery);\r\n        }\r\n      }\r\n      if (this.queryOverride) {\r\n        return el.matches(this.queryOverride) && notDisqualified;\r\n      } else {\r\n        return el.matches("h1, h2, h3, h4, h5, h6") && notDisqualified;\r\n      }\r\n    },\r\n    calculateTitleType(el) {\r\n      if (this.queryOverride) {\r\n        return el.getAttribute("data-rank");\r\n      } else {\r\n        return parseInt(el.tagName[1]);\r\n      }\r\n    },\r\n    crawl(node) {\r\n      let titles = [];\r\n      let stack = [node];\r\n      let visited = [];\r\n      while (stack.length > 0) {\r\n        let el = stack.pop();\r\n        if (typeof el.children !== "undefined") {\r\n          for (let child of Array.from(el.children).filter(\r\n            (c) => visited.indexOf(c) == -1 && !c.isEqualNode(el)\r\n          )) {\r\n            stack.push(child);\r\n          }\r\n        }\r\n        let path = this.getPathTo(el);\r\n        let notVisited = visited.indexOf(path) == -1;\r\n        let isTitle = this.checkIfTitle(el);\r\n        if (notVisited && isTitle) {\r\n          titles.push({\r\n            el: el,\r\n            id: this.getPathTo(el),\r\n            titleType: this.calculateTitleType(el),\r\n            offset: -1,\r\n            visible: false,\r\n            hovered: false,\r\n            override: false,\r\n          });\r\n        }\r\n        visited.push(this.getPathTo(el));\r\n      }\r\n      return titles.reverse();\r\n    },\r\n    checkTitles() {\r\n      let yOffset = window.pageYOffset;\r\n      if (this.titles.length == 0) {\r\n        return;\r\n      }\r\n      for (let [index, title] of this.titles.entries()) {\r\n        title.offset = title.el.getBoundingClientRect().top;\r\n        if (title.offset < 20 + this.offset && title.offset > 0) {\r\n          for (let other of this.titles.filter((o) => o.visible)) {\r\n            other.visible = false;\r\n          }\r\n          title.visible = true;\r\n        } else if (\r\n          title.visible &&\r\n          title.el.getBoundingClientRect().bottom >=\r\n            (window.innerHeight || document.documentElement.clientHeight)\r\n        ) {\r\n          if (this.titles[index - 1]) this.titles[index - 1].visible = true;\r\n          title.visible = false;\r\n        }\r\n      }\r\n      if (\r\n        yOffset == 0 &&\r\n        window.innerWidth - document.documentElement.clientWidth == 0\r\n      ) {\r\n        for (let other of this.titles.filter((o) => o.visible)) {\r\n          other.visible = false;\r\n        }\r\n        this.titles[0].visible = true;\r\n      } else if (window.innerHeight + yOffset >= document.body.offsetHeight) {\r\n        for (let other of this.titles.filter((o) => o.visible)) {\r\n          other.visible = false;\r\n        }\r\n        this.titles[this.titles.length - 1].visible = true;\r\n      }\r\n    },\r\n    assignChildren() {\r\n      for (let title = 0; title < this.titles.length; title++) {\r\n        let parentTitle = this.titles[title];\r\n\r\n        // instantiate parents, children, and direct parents arrays\r\n        if (!parentTitle.children) {\r\n          parentTitle.children = [];\r\n        }\r\n        if (!parentTitle.parents) {\r\n          parentTitle.parents = [];\r\n        }\r\n        if (!parentTitle.directParents) {\r\n          parentTitle.directParents = [];\r\n        }\r\n\r\n        for (\r\n          let potentialChild = title + 1;\r\n          potentialChild < this.titles.length;\r\n          potentialChild++\r\n        ) {\r\n          let childTitle = this.titles[potentialChild];\r\n\r\n          // if titletype is greater than parent, title is child of parent\r\n          if (childTitle.titleType > parentTitle.titleType) {\r\n            parentTitle.children.push(childTitle);\r\n            if (!childTitle.parents) {\r\n              childTitle.parents = [];\r\n            }\r\n            if (!childTitle.directParents) {\r\n              childTitle.directParents = [];\r\n            }\r\n\r\n            childTitle.parents.push(parentTitle);\r\n          } else {\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      for (let title of this.titles) {\r\n        // look for titles with only root level parents\r\n        if (title.parents.length == 1) {\r\n          title.directParents.push(title.parents[0]);\r\n        }\r\n        // assign siblings\r\n        if (title.parents.length == 0) {\r\n          title.siblings = [];\r\n        } else {\r\n          title.siblings = this.titles.filter(\r\n            (o) =>\r\n              o.parents.filter((p) => p.id == title.parents[0].id).length > 0 &&\r\n              o.parents.length == title.parents.length &&\r\n              o.id != title.id\r\n          );\r\n        }\r\n      }\r\n    },\r\n    updateTitles() {\r\n      this.titles = this.crawl(document.getElementsByTagName("body")[0]);\r\n      this.assignChildren();\r\n      this.checkTitles();\r\n    },\r\n    updateTitlesOnDOMChange(mutationsList) {\r\n      for (let mutation of mutationsList) {\r\n        if (mutation.type === "childList") {\r\n          this.updateTitles();\r\n        }\r\n      }\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    this.observer.disconnect();\r\n  },\r\n  mounted() {\r\n    let body = document.getElementsByTagName("body")[0];\r\n    if (this.enableDomListening) {\r\n      let config = { attributes: false, childList: true, subtree: false };\r\n      this.observer = new MutationObserver(this.updateTitlesOnDOMChange);\r\n      this.observer.observe(body, config);\r\n    } else {\r\n      (function () {\r\n        if (typeof window.CustomEvent === "function") return false;\r\n\r\n        function CustomEvent(event, params) {\r\n          params = params || {\r\n            bubbles: false,\r\n            cancelable: false,\r\n            detail: null,\r\n          };\r\n          var evt = document.createEvent("CustomEvent");\r\n          evt.initCustomEvent(\r\n            event,\r\n            params.bubbles,\r\n            params.cancelable,\r\n            params.detail\r\n          );\r\n          return evt;\r\n        }\r\n\r\n        window.CustomEvent = CustomEvent;\r\n      })();\r\n      window.addEventListener(\r\n        "IntusFacultas-table-of-contents",\r\n        this.updateTitles\r\n      );\r\n    }\r\n    this.updateTitles();\r\n    window.addEventListener("scroll", this.checkTitles);\r\n    (function () {\r\n      "use strict";\r\n\r\n      // polyfill\r\n      function polyfill() {\r\n        // aliases\r\n        var w = window;\r\n        var d = document;\r\n\r\n        // return if scroll behavior is supported and polyfill is not forced\r\n        if (\r\n          "scrollBehavior" in d.documentElement.style &&\r\n          w.__forceSmoothScrollPolyfill__ !== true\r\n        ) {\r\n          return;\r\n        }\r\n\r\n        // globals\r\n        var Element = w.HTMLElement || w.Element;\r\n        var SCROLL_TIME = 468;\r\n\r\n        // object gathering original scroll methods\r\n        var original = {\r\n          scroll: w.scroll || w.scrollTo,\r\n          scrollBy: w.scrollBy,\r\n          elementScroll: Element.prototype.scroll || scrollElement,\r\n          scrollIntoView: Element.prototype.scrollIntoView,\r\n        };\r\n\r\n        // define timing method\r\n        var now =\r\n          w.performance && w.performance.now\r\n            ? w.performance.now.bind(w.performance)\r\n            : Date.now;\r\n\r\n        /**\r\n         * indicates if a the current browser is made by Microsoft\r\n         * @method isMicrosoftBrowser\r\n         * @param {String} userAgent\r\n         * @returns {Boolean}\r\n         */\r\n        function isMicrosoftBrowser(userAgent) {\r\n          var userAgentPatterns = ["MSIE ", "Trident/", "Edge/"];\r\n\r\n          return new RegExp(userAgentPatterns.join("|")).test(userAgent);\r\n        }\r\n\r\n        /*\r\n         * IE has rounding bug rounding down clientHeight and clientWidth and\r\n         * rounding up scrollHeight and scrollWidth causing false positives\r\n         * on hasScrollableSpace\r\n         */\r\n        var ROUNDING_TOLERANCE = isMicrosoftBrowser(w.navigator.userAgent)\r\n          ? 1\r\n          : 0;\r\n\r\n        /**\r\n         * changes scroll position inside an element\r\n         * @method scrollElement\r\n         * @param {Number} x\r\n         * @param {Number} y\r\n         * @returns {undefined}\r\n         */\r\n        function scrollElement(x, y) {\r\n          this.scrollLeft = x;\r\n          this.scrollTop = y;\r\n        }\r\n\r\n        /**\r\n         * returns result of applying ease math function to a number\r\n         * @method ease\r\n         * @param {Number} k\r\n         * @returns {Number}\r\n         */\r\n        function ease(k) {\r\n          return 0.5 * (1 - Math.cos(Math.PI * k));\r\n        }\r\n\r\n        /**\r\n         * indicates if a smooth behavior should be applied\r\n         * @method shouldBailOut\r\n         * @param {Number|Object} firstArg\r\n         * @returns {Boolean}\r\n         */\r\n        function shouldBailOut(firstArg) {\r\n          if (\r\n            firstArg === null ||\r\n            typeof firstArg !== "object" ||\r\n            firstArg.behavior === undefined ||\r\n            firstArg.behavior === "auto" ||\r\n            firstArg.behavior === "instant"\r\n          ) {\r\n            // first argument is not an object/null\r\n            // or behavior is auto, instant or undefined\r\n            return true;\r\n          }\r\n\r\n          if (typeof firstArg === "object" && firstArg.behavior === "smooth") {\r\n            // first argument is an object and behavior is smooth\r\n            return false;\r\n          }\r\n\r\n          // throw error when behavior is not supported\r\n          throw new TypeError(\r\n            "behavior member of ScrollOptions " +\r\n              firstArg.behavior +\r\n              " is not a valid value for enumeration ScrollBehavior."\r\n          );\r\n        }\r\n\r\n        /**\r\n         * indicates if an element has scrollable space in the provided axis\r\n         * @method hasScrollableSpace\r\n         * @param {Node} el\r\n         * @param {String} axis\r\n         * @returns {Boolean}\r\n         */\r\n        function hasScrollableSpace(el, axis) {\r\n          if (axis === "Y") {\r\n            return el.clientHeight + ROUNDING_TOLERANCE < el.scrollHeight;\r\n          }\r\n\r\n          if (axis === "X") {\r\n            return el.clientWidth + ROUNDING_TOLERANCE < el.scrollWidth;\r\n          }\r\n        }\r\n\r\n        /**\r\n         * indicates if an element has a scrollable overflow property in the axis\r\n         * @method canOverflow\r\n         * @param {Node} el\r\n         * @param {String} axis\r\n         * @returns {Boolean}\r\n         */\r\n        function canOverflow(el, axis) {\r\n          var overflowValue = w.getComputedStyle(el, null)["overflow" + axis];\r\n\r\n          return overflowValue === "auto" || overflowValue === "scroll";\r\n        }\r\n\r\n        /**\r\n         * indicates if an element can be scrolled in either axis\r\n         * @method isScrollable\r\n         * @param {Node} el\r\n         * @param {String} axis\r\n         * @returns {Boolean}\r\n         */\r\n        function isScrollable(el) {\r\n          var isScrollableY =\r\n            hasScrollableSpace(el, "Y") && canOverflow(el, "Y");\r\n          var isScrollableX =\r\n            hasScrollableSpace(el, "X") && canOverflow(el, "X");\r\n\r\n          return isScrollableY || isScrollableX;\r\n        }\r\n\r\n        /**\r\n         * finds scrollable parent of an element\r\n         * @method findScrollableParent\r\n         * @param {Node} el\r\n         * @returns {Node} el\r\n         */\r\n        function findScrollableParent(el) {\r\n          while (el !== d.body && isScrollable(el) === false) {\r\n            el = el.parentNode || el.host;\r\n          }\r\n\r\n          return el;\r\n        }\r\n\r\n        /**\r\n         * self invoked function that, given a context, steps through scrolling\r\n         * @method step\r\n         * @param {Object} context\r\n         * @returns {undefined}\r\n         */\r\n        function step(context) {\r\n          var time = now();\r\n          var value;\r\n          var currentX;\r\n          var currentY;\r\n          var elapsed = (time - context.startTime) / SCROLL_TIME;\r\n\r\n          // avoid elapsed times higher than one\r\n          elapsed = elapsed > 1 ? 1 : elapsed;\r\n\r\n          // apply easing to elapsed time\r\n          value = ease(elapsed);\r\n\r\n          currentX = context.startX + (context.x - context.startX) * value;\r\n          currentY = context.startY + (context.y - context.startY) * value;\r\n\r\n          context.method.call(context.scrollable, currentX, currentY);\r\n\r\n          // scroll more if we have not reached our destination\r\n          if (currentX !== context.x || currentY !== context.y) {\r\n            w.requestAnimationFrame(step.bind(w, context));\r\n          }\r\n        }\r\n\r\n        /**\r\n         * scrolls window or element with a smooth behavior\r\n         * @method smoothScroll\r\n         * @param {Object|Node} el\r\n         * @param {Number} x\r\n         * @param {Number} y\r\n         * @returns {undefined}\r\n         */\r\n        function smoothScroll(el, x, y) {\r\n          var scrollable;\r\n          var startX;\r\n          var startY;\r\n          var method;\r\n          var startTime = now();\r\n\r\n          // define scroll context\r\n          if (el === d.body) {\r\n            scrollable = w;\r\n            startX = w.scrollX || w.pageXOffset;\r\n            startY = w.scrollY || w.pageYOffset;\r\n            method = original.scroll;\r\n          } else {\r\n            scrollable = el;\r\n            startX = el.scrollLeft;\r\n            startY = el.scrollTop;\r\n            method = scrollElement;\r\n          }\r\n\r\n          // scroll looping over a frame\r\n          step({\r\n            scrollable: scrollable,\r\n            method: method,\r\n            startTime: startTime,\r\n            startX: startX,\r\n            startY: startY,\r\n            x: x,\r\n            y: y,\r\n          });\r\n        }\r\n\r\n        // ORIGINAL METHODS OVERRIDES\r\n        // w.scroll and w.scrollTo\r\n        w.scroll = w.scrollTo = function () {\r\n          // avoid action when no arguments are passed\r\n          if (arguments[0] === undefined) {\r\n            return;\r\n          }\r\n\r\n          // avoid smooth behavior if not required\r\n          if (shouldBailOut(arguments[0]) === true) {\r\n            original.scroll.call(\r\n              w,\r\n              arguments[0].left !== undefined\r\n                ? arguments[0].left\r\n                : typeof arguments[0] !== "object"\r\n                ? arguments[0]\r\n                : w.scrollX || w.pageXOffset,\r\n              // use top prop, second argument if present or fallback to scrollY\r\n              arguments[0].top !== undefined\r\n                ? arguments[0].top\r\n                : arguments[1] !== undefined\r\n                ? arguments[1]\r\n                : w.scrollY || w.pageYOffset\r\n            );\r\n\r\n            return;\r\n          }\r\n\r\n          // LET THE SMOOTHNESS BEGIN!\r\n          smoothScroll.call(\r\n            w,\r\n            d.body,\r\n            arguments[0].left !== undefined\r\n              ? ~~arguments[0].left\r\n              : w.scrollX || w.pageXOffset,\r\n            arguments[0].top !== undefined\r\n              ? ~~arguments[0].top\r\n              : w.scrollY || w.pageYOffset\r\n          );\r\n        };\r\n\r\n        // w.scrollBy\r\n        w.scrollBy = function () {\r\n          // avoid action when no arguments are passed\r\n          if (arguments[0] === undefined) {\r\n            return;\r\n          }\r\n\r\n          // avoid smooth behavior if not required\r\n          if (shouldBailOut(arguments[0])) {\r\n            original.scrollBy.call(\r\n              w,\r\n              arguments[0].left !== undefined\r\n                ? arguments[0].left\r\n                : typeof arguments[0] !== "object"\r\n                ? arguments[0]\r\n                : 0,\r\n              arguments[0].top !== undefined\r\n                ? arguments[0].top\r\n                : arguments[1] !== undefined\r\n                ? arguments[1]\r\n                : 0\r\n            );\r\n\r\n            return;\r\n          }\r\n\r\n          // LET THE SMOOTHNESS BEGIN!\r\n          smoothScroll.call(\r\n            w,\r\n            d.body,\r\n            ~~arguments[0].left + (w.scrollX || w.pageXOffset),\r\n            ~~arguments[0].top + (w.scrollY || w.pageYOffset)\r\n          );\r\n        };\r\n\r\n        // Element.prototype.scroll and Element.prototype.scrollTo\r\n        Element.prototype.scroll = Element.prototype.scrollTo = function () {\r\n          // avoid action when no arguments are passed\r\n          if (arguments[0] === undefined) {\r\n            return;\r\n          }\r\n\r\n          // avoid smooth behavior if not required\r\n          if (shouldBailOut(arguments[0]) === true) {\r\n            // if one number is passed, throw error to match Firefox implementation\r\n            if (\r\n              typeof arguments[0] === "number" &&\r\n              arguments[1] === undefined\r\n            ) {\r\n              throw new SyntaxError("Value could not be converted");\r\n            }\r\n\r\n            original.elementScroll.call(\r\n              this,\r\n              // use left prop, first number argument or fallback to scrollLeft\r\n              arguments[0].left !== undefined\r\n                ? ~~arguments[0].left\r\n                : typeof arguments[0] !== "object"\r\n                ? ~~arguments[0]\r\n                : this.scrollLeft,\r\n              // use top prop, second argument or fallback to scrollTop\r\n              arguments[0].top !== undefined\r\n                ? ~~arguments[0].top\r\n                : arguments[1] !== undefined\r\n                ? ~~arguments[1]\r\n                : this.scrollTop\r\n            );\r\n\r\n            return;\r\n          }\r\n\r\n          var left = arguments[0].left;\r\n          var top = arguments[0].top;\r\n\r\n          // LET THE SMOOTHNESS BEGIN!\r\n          smoothScroll.call(\r\n            this,\r\n            this,\r\n            typeof left === "undefined" ? this.scrollLeft : ~~left,\r\n            typeof top === "undefined" ? this.scrollTop : ~~top\r\n          );\r\n        };\r\n\r\n        // Element.prototype.scrollBy\r\n        Element.prototype.scrollBy = function () {\r\n          // avoid action when no arguments are passed\r\n          if (arguments[0] === undefined) {\r\n            return;\r\n          }\r\n\r\n          // avoid smooth behavior if not required\r\n          if (shouldBailOut(arguments[0]) === true) {\r\n            original.elementScroll.call(\r\n              this,\r\n              arguments[0].left !== undefined\r\n                ? ~~arguments[0].left + this.scrollLeft\r\n                : ~~arguments[0] + this.scrollLeft,\r\n              arguments[0].top !== undefined\r\n                ? ~~arguments[0].top + this.scrollTop\r\n                : ~~arguments[1] + this.scrollTop\r\n            );\r\n\r\n            return;\r\n          }\r\n\r\n          this.scroll({\r\n            left: ~~arguments[0].left + this.scrollLeft,\r\n            top: ~~arguments[0].top + this.scrollTop,\r\n            behavior: arguments[0].behavior,\r\n          });\r\n        };\r\n\r\n        // Element.prototype.scrollIntoView\r\n        Element.prototype.scrollIntoView = function () {\r\n          // avoid smooth behavior if not required\r\n          if (shouldBailOut(arguments[0]) === true) {\r\n            original.scrollIntoView.call(\r\n              this,\r\n              arguments[0] === undefined ? true : arguments[0]\r\n            );\r\n\r\n            return;\r\n          }\r\n\r\n          // LET THE SMOOTHNESS BEGIN!\r\n          var scrollableParent = findScrollableParent(this);\r\n          var parentRects = scrollableParent.getBoundingClientRect();\r\n          var clientRects = this.getBoundingClientRect();\r\n\r\n          if (scrollableParent !== d.body) {\r\n            // reveal element inside parent\r\n            smoothScroll.call(\r\n              this,\r\n              scrollableParent,\r\n              scrollableParent.scrollLeft + clientRects.left - parentRects.left,\r\n              scrollableParent.scrollTop + clientRects.top - parentRects.top\r\n            );\r\n\r\n            // reveal parent in viewport unless is fixed\r\n            if (w.getComputedStyle(scrollableParent).position !== "fixed") {\r\n              w.scrollBy({\r\n                left: parentRects.left,\r\n                top: parentRects.top,\r\n                behavior: "smooth",\r\n              });\r\n            }\r\n          } else {\r\n            // reveal element in viewport\r\n            w.scrollBy({\r\n              left: clientRects.left,\r\n              top: clientRects.top,\r\n              behavior: "smooth",\r\n            });\r\n          }\r\n        };\r\n      }\r\n\r\n      if (typeof exports === "object" && typeof module !== "undefined") {\r\n        // commonjs\r\n        module.exports = { polyfill: polyfill };\r\n      } else {\r\n        // global\r\n        polyfill();\r\n      }\r\n    })();\r\n  },\r\n  beforeDestroy() {\r\n    if (!this.enableDomListening) {\r\n      window.removeEventListener(\r\n        "IntusFacultas-table-of-contents",\r\n        this.updateTitles\r\n      );\r\n    }\r\n    window.removeEventListener("scroll", this.checkTitles);\r\n  },\r\n};\r\nexport default TableOfContents;\r\n<\/script>\r\n\r\n<style>\r\n.visible-title {\r\n  max-height: 100px !important;\r\n  padding-bottom: 2px;\r\n  padding-top: 2px;\r\n}\r\n.margined-title {\r\n  border-left-style: solid;\r\n  border-left-width: 3px;\r\n  border-left-color: #ff7200 !important;\r\n}\r\n.active-title {\r\n  font-weight: bold;\r\n}\r\n.table-of-contents-title {\r\n  font-size: 16px;\r\n}\r\n</style>\r\n']},media:void 0})}),E,void 0,!1,void 0,!1,(function(e){return function(e,r){return function(e,r){var n=S?r.media||"default":e,t=O[n]||(O[n]={ids:new Set,styles:[]});if(!t.ids.has(e)){t.ids.add(e);var i=r.source;if(r.map&&(i+="\n/*# sourceURL="+r.map.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r.map))))+" */"),t.element||(t.element=document.createElement("style"),t.element.type="text/css",r.media&&t.element.setAttribute("media",r.media),void 0===x&&(x=document.head||document.getElementsByTagName("head")[0]),x.appendChild(t.element)),"styleSheet"in t.element)t.styles.push(i),t.element.styleSheet.cssText=t.styles.filter(Boolean).join("\n");else{var o=t.ids.size-1,l=document.createTextNode(i),s=t.element.childNodes;s[o]&&t.element.removeChild(s[o]),s.length?t.element.insertBefore(l,s[o]):t.element.appendChild(l)}}}(e,r)}}),void 0,void 0);var k=function(e){k.installed||(k.installed=!0,e.component("TableOfContents",C))},N={install:k},L=null;"undefined"!=typeof window?L=window.Vue:"undefined"!=typeof global&&(L=global.Vue),L&&L.use(N),C.install=k;export default C;export{C as TableOfContents};
