import{SmallText as r,NLabel as n}from"@IntusFacultas/typography";import{VueInput as e}from"@IntusFacultas/input";import t from"vue-styled-components";import i from"@IntusFacultas/select-me";import{NButton as o}from"@IntusFacultas/button";import{Placeholder as s}from"@IntusFacultas/placeholder";function a(r){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function l(r,n){(null==n||n>r.length)&&(n=r.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=r[e];return t}function u(r){if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(r=function(r,n){if(r){if("string"==typeof r)return l(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(r,n):void 0}}(r))){var n=0,e=function(){};return{s:e,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(r){throw r},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var t,i,o=!0,s=!1;return{s:function(){t=r[Symbol.iterator]()},n:function(){var r=t.next();return o=r.done,r},e:function(r){s=!0,i=r},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw i}}}}var d={components:{SmallText:r,VueInput:e},tag:"what",data:function(){return{internalValue:""}},watch:{value:function(r){r!=this.internalValue&&(this.internalValue=r)}},mounted:function(){this.internalValue=this.value},props:{name:String,inputType:String,label:String,required:Boolean,value:[String,Number],placeholder:String,disabled:{type:Boolean,default:!1},errors:{type:Array,default:function(){return[]}}},methods:{computeFlavor:function(r){return-1!=r.indexOf("Text")||this.errors.length>0?"Danger":"LightBlue"},onChange:function(r){this.internalValue=r,this.$emit("change",r)},onInput:function(r){this.internalValue=r,this.$emit("input",r)}}};function f(r,n,e,t,i,o,s,a,l,u){"boolean"!=typeof s&&(l=a,a=s,s=!1);var d,f="function"==typeof e?e.options:e;if(r&&r.render&&(f.render=r.render,f.staticRenderFns=r.staticRenderFns,f._compiled=!0,i&&(f.functional=!0)),t&&(f._scopeId=t),o?(d=function(r){(r=r||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(r=__VUE_SSR_CONTEXT__),n&&n.call(this,l(r)),r&&r._registeredComponents&&r._registeredComponents.add(o)},f._ssrRegister=d):n&&(d=s?function(r){n.call(this,u(r,this.$root.$options.shadowRoot))}:function(r){n.call(this,a(r))}),d)if(f.functional){var m=f.render;f.render=function(r,n){return d.call(n),m(r,n)}}else{var c=f.beforeCreate;f.beforeCreate=c?[].concat(c,d):[d]}return e}var m,c="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function p(r){return function(r,n){return function(r,n){var e=c?n.media||"default":r,t=h[e]||(h[e]={ids:new Set,styles:[]});if(!t.ids.has(r)){t.ids.add(r);var i=n.source;if(n.map&&(i+="\n/*# sourceURL="+n.map.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n.map))))+" */"),t.element||(t.element=document.createElement("style"),t.element.type="text/css",n.media&&t.element.setAttribute("media",n.media),void 0===m&&(m=document.head||document.getElementsByTagName("head")[0]),m.appendChild(t.element)),"styleSheet"in t.element)t.styles.push(i),t.element.styleSheet.cssText=t.styles.filter(Boolean).join("\n");else{var o=t.ids.size-1,s=document.createTextNode(i),a=t.element.childNodes;a[o]&&t.element.removeChild(a[o]),a.length?t.element.insertBefore(s,a[o]):t.element.appendChild(s)}}}(r,n)}}var h={};const A=d;var v=function(){var r=this,n=r.$createElement,e=r._self._c||n;return e("div",[e("vue-input",{attrs:{flavor:r.computeFlavor("field"),name:r.name,"input-type":r.inputType,required:r.required,label:r.label,disabled:r.disabled,placeholder:r.placeholder},on:{change:r.onChange,input:r.onInput,keyup:function(n){return r.$emit("keyup",n)}},model:{value:r.internalValue,callback:function(n){r.internalValue=n},expression:"internalValue"}}),r._v(" "),e("div",{staticClass:"form-error-message"},r._l(r.errors,(function(n){return e("small-text",{key:"field-error-"+n,attrs:{flavor:r.computeFlavor("fieldText")}},[r._v(r._s(n))])})),1)],1)};v._withStripped=!0;const y=f({render:v,staticRenderFns:[]},(function(r){r&&r("data-v-915bb754_0",{source:"\n.form-error-message {\r\n  min-height: 17px;\r\n  min-width: 1px;\r\n  display: flex;\r\n  flex-direction: column;\n}\r\n",map:{version:3,sources:["C:\\Users\\pedro\\Documents\\Personal Projects\\GitHub\\storybook\\src\\components\\Form\\src\\FormInput.vue"],names:[],mappings:";AAyFA;EACA,gBAAA;EACA,cAAA;EACA,aAAA;EACA,sBAAA;AACA",file:"FormInput.vue",sourcesContent:['<template>\r\n  <div>\r\n    <vue-input\r\n      :flavor="computeFlavor(\'field\')"\r\n      :name="name"\r\n      :input-type="inputType"\r\n      :required="required"\r\n      :label="label"\r\n      :disabled="disabled"\r\n      v-model="internalValue"\r\n      :placeholder="placeholder"\r\n      @change="onChange"\r\n      @input="onInput"\r\n      @keyup="$emit(\'keyup\', $event)"\r\n    ></vue-input>\r\n    <div class="form-error-message">\r\n      <small-text\r\n        :flavor="computeFlavor(\'fieldText\')"\r\n        v-for="error in errors"\r\n        :key="`field-error-${error}`"\r\n        >{{ error }}</small-text\r\n      >\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { SmallText } from "@IntusFacultas/typography";\r\nimport { VueInput } from "@IntusFacultas/input";\r\nexport const FormInput = {\r\n  components: { SmallText, VueInput },\r\n  tag: "what",\r\n  data() {\r\n    return {\r\n      internalValue: "",\r\n    };\r\n  },\r\n  watch: {\r\n    value(newVal) {\r\n      if (newVal != this.internalValue) {\r\n        this.internalValue = newVal;\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.internalValue = this.value;\r\n  },\r\n  props: {\r\n    name: String,\r\n    inputType: String,\r\n    label: String,\r\n    required: Boolean,\r\n    value: [String, Number],\r\n    placeholder: String,\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    errors: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    computeFlavor(el) {\r\n      if (el.indexOf("Text") != -1) {\r\n        return "Danger";\r\n      } else {\r\n        if (this.errors.length > 0) {\r\n          return "Danger";\r\n        }\r\n        return "LightBlue";\r\n      }\r\n    },\r\n    onChange($e) {\r\n      this.internalValue = $e;\r\n      this.$emit("change", $e);\r\n    },\r\n    onInput($e) {\r\n      this.internalValue = $e;\r\n      this.$emit("input", $e);\r\n    },\r\n  },\r\n};\r\nexport default FormInput;\r\n<\/script>\r\n\r\n<style>\r\n.form-error-message {\r\n  min-height: 17px;\r\n  min-width: 1px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n</style>\r\n']},media:void 0})}),A,void 0,!1,void 0,!1,p,void 0,void 0);function b(){var r,n,e=(r=["\n  position: relative;\n"],n||(n=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(n)}})));return b=function(){return e},e}const g={components:{SmallText:r,RawFormInputContainer:t.div(b())},data:function(){return{internalValue:""}},watch:{value:function(r){r!=this.internalValue&&(this.internalValue=r)}},mounted:function(){this.internalValue=this.value},props:{errors:{type:Array,default:function(){return[]}}},methods:{computeFlavor:function(){return this.errors.length>0?"Danger":"LightBlue"}}};var E=function(){var r=this,n=r.$createElement,e=r._self._c||n;return e("raw-form-input-container",[r._t("default"),r._v(" "),e("div",{staticClass:"form-error-message"},r._l(r.errors,(function(n,t){return e("small-text",{key:"field-error-"+t,attrs:{flavor:r.computeFlavor("fieldText")}},[r._v(r._s(n))])})),1)],2)};E._withStripped=!0;const F={components:{FormInput:y,NButton:o,SelectMe:i,RawFormInput:f({render:E,staticRenderFns:[]},(function(r){r&&r("data-v-ec4288ca_0",{source:"\n.form-error-message {\r\n  min-height: 17px;\r\n  min-width: 1px;\n}\r\n",map:{version:3,sources:["C:\\Users\\pedro\\Documents\\Personal Projects\\GitHub\\storybook\\src\\components\\Form\\src\\RawFormInput.vue"],names:[],mappings:";AAyDA;EACA,gBAAA;EACA,cAAA;AACA",file:"RawFormInput.vue",sourcesContent:['<template>\r\n  <raw-form-input-container>\r\n    <slot></slot>\r\n    <div class="form-error-message">\r\n      <small-text\r\n        :flavor="computeFlavor(\'fieldText\')"\r\n        v-for="(error, index) in errors"\r\n        :key="`field-error-${index}`"\r\n        >{{ error }}</small-text\r\n      >\r\n    </div>\r\n  </raw-form-input-container>\r\n</template>\r\n<script>\r\nimport styled from "vue-styled-components";\r\nimport { SmallText } from "@IntusFacultas/typography";\r\nconst RawFormInputContainer = styled.div`\r\n  position: relative;\r\n`;\r\nexport const RawFormInput = {\r\n  components: { SmallText, RawFormInputContainer },\r\n  data() {\r\n    return {\r\n      internalValue: "",\r\n    };\r\n  },\r\n  watch: {\r\n    value(newVal) {\r\n      if (newVal != this.internalValue) {\r\n        this.internalValue = newVal;\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.internalValue = this.value;\r\n  },\r\n  props: {\r\n    errors: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    computeFlavor() {\r\n      if (this.errors.length > 0) {\r\n        return "Danger";\r\n      }\r\n      return "LightBlue";\r\n    },\r\n  },\r\n};\r\nexport default RawFormInput;\r\n<\/script>\r\n\r\n<style>\r\n.form-error-message {\r\n  min-height: 17px;\r\n  min-width: 1px;\r\n}\r\n</style>\r\n']},media:void 0})}),g,void 0,!1,void 0,!1,p,void 0,void 0),NLabel:n,Placeholder:s},data:function(){return{internalFields:[],internalErrors:{},load:!1,errorsExist:!1,overridenFieldErrors:[]}},props:{showBottom:{type:Boolean,default:!0},submitting:Boolean,disableSubmission:Boolean,disableClearing:Boolean,allowSubmissionOnEnter:{type:Boolean,default:!0},fields:{type:Array,default:function(){return[]}},errors:{type:Object,default:function(){return{}}}},watch:{fields:function(){this.internalFields=this.fields.slice()},errors:{handler:function(){for(var r=0,n=Object.keys(this.errors);r<n.length;r++){var e=n[r];-1==this.overridenFieldErrors.indexOf(e)&&this.$set(this.internalErrors,e,this.errors[e].slice())}this.checkErrors(),this.$forceUpdate()},deep:!0}},mounted:function(){var r=this,n=this;setTimeout((function(){n.load=!0}),500),this.fields.forEach((function(n){r.$watch((function(){return n}),r.handleChange,{deep:!0})})),this.internalFields=this.fields.slice();for(var e=0,t=Object.keys(this.errors);e<t.length;e++){var i=t[e];this.internalErrors[i]=this.errors[i].slice()}},methods:{checkErrors:function(){for(var r=0,n=Object.keys(this.internalErrors);r<n.length;r++){var e=n[r];if(0!=this.internalErrors[e].length)return this.errorsExist=!0,!0}return this.errorsExist=!1,!1},submitForm:function(r){r==this.internalFields.length-1&&this.allowSubmissionOnEnter&&this.$emit("submit")},clearAll:function(){var r,n=u(this.internalFields);try{for(n.s();!(r=n.n()).done;){r.value.value=""}}catch(r){n.e(r)}finally{n.f()}this.$emit("clear"),this.$emit("fields",this.internalFields.slice())},objectDeepEquals:function(r,n){var e=Object.keys(r),t=Object.keys(n);if(e.length!==t.length)return!1;for(var i=0,o=e;i<o.length;i++){var s=o[i];if(-1==t.indexOf(s))return!1;if(a(r[s])!=a(n[s]))return!1;if("object"==a(r[s])){if(!this.objectDeepEquals(r[s],n[s]))return!1}else if(Array.isArray(r[s])){if(!this.deepEquals(r[s],n[s]))return!1}else if(r[s]!=n[s])return!1}return!0},deepEquals:function(r,n){var e=!0,t=this;return!(!Array.isArray(r)||!Array.isArray(n))&&(r.length===n.length&&(r.forEach((function(r,i){var o=n[i];r===o||t.objectDeepEquals(r,o)||(e=!1)})),e))},validateField:function(r){if("function"==typeof r.validation){var n=r.validation(r.value,this.internalFields);if(n)return Array.isArray(this.internalErrors[r.name])||this.$set(this.internalErrors,r.name,[n]),-1==this.internalErrors[r.name].indexOf(n)&&this.internalErrors[r.name].push(n),this.$forceUpdate(),this.$emit("errors",this.internalErrors),this.checkErrors(),!1}return this.internalErrors[r.name]=[],-1==this.overridenFieldErrors.indexOf(r.name)&&this.overridenFieldErrors.push(r.name),this.$emit("fields",this.internalFields.slice()),this.$emit("errors",this.internalErrors),this.checkErrors(),!0},handleChange:function(){this.internalFields=this.fields.slice()},submit:function(r){r.preventDefault(),this.overridenFieldErrors=[],document.activeElement.blur(),this.$emit("submit")}}};var x=function(){var r=this,n=r.$createElement,e=r._self._c||n;return e("form",[r._l(r.internalFields,(function(n,t){return e("div",{key:"field"+t},["select"!=n.type?e("form-input",{attrs:{label:n.label,placeholder:n.placeholder,name:n.name,required:n.required,disabled:n.disabled,errors:r.internalErrors[n.name],"input-type":n.type},on:{input:function(e){return r.validateField(n)},keyup:function(n){return!n.type.indexOf("key")&&r._k(n.keyCode,"enter",13,n.key,"Enter")?null:r.submitForm(t)}},model:{value:n.value,callback:function(e){r.$set(n,"value",e)},expression:"field.value"}}):"select"==n.type?e("raw-form-input",{attrs:{errors:r.internalErrors[n.name]}},[e("n-label",{attrs:{for:n.name}},[r._v(r._s(n.label))]),r._v(" "),e("select-me",{class:{"opacity-transparent":!r.load},attrs:{name:n.name,"can-be-empty":!n.required,options:n.options},on:{input:function(e){return r.validateField(n)}},model:{value:n.value,callback:function(e){r.$set(n,"value",e)},expression:"field.value"}}),r._v(" "),r.load?r._e():e("placeholder",{staticClass:"field-placeholder",attrs:{height:"35px"}})],1):r._e()],1)})),r._v(" "),r.showBottom?e("div",{staticClass:"form-bottom-content"},[r._t("default"),r._v(" "),e("div",[r.disableClearing?r._e():e("n-button",{staticClass:"form-button-spacing",attrs:{type:"button",flavor:"Warning",disabled:r.submitting},on:{click:r.clearAll}},[r._v("Clear")]),r._v(" "),e("n-button",{attrs:{type:"button",flavor:"Primary",loading:r.submitting,disabled:r.submitting||r.errorsExist||r.disableSubmission},on:{click:function(n){return r.submit(n)}}},[e("span",[r._v("Submit ")]),r._v(" "),r.submitting?e("svg",{staticClass:"loading-spinner",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"white"}},[e("path",{attrs:{d:"M13.75 22c0 .966-.783 1.75-1.75 1.75s-1.75-.784-1.75-1.75.783-1.75 1.75-1.75 1.75.784 1.75 1.75zm-1.75-22c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm10 10.75c.689 0 1.249.561 1.249 1.25 0 .69-.56 1.25-1.249 1.25-.69 0-1.249-.559-1.249-1.25 0-.689.559-1.25 1.249-1.25zm-22 1.25c0 1.105.896 2 2 2s2-.895 2-2c0-1.104-.896-2-2-2s-2 .896-2 2zm19-8c.551 0 1 .449 1 1 0 .553-.449 1.002-1 1-.551 0-1-.447-1-.998 0-.553.449-1.002 1-1.002zm0 13.5c.828 0 1.5.672 1.5 1.5s-.672 1.501-1.502 1.5c-.826 0-1.498-.671-1.498-1.499 0-.829.672-1.501 1.5-1.501zm-14-14.5c1.104 0 2 .896 2 2s-.896 2-2.001 2c-1.103 0-1.999-.895-1.999-2s.896-2 2-2zm0 14c1.104 0 2 .896 2 2s-.896 2-2.001 2c-1.103 0-1.999-.895-1.999-2s.896-2 2-2z"}})]):r._e()])],1)],2):r._e()],2)};x._withStripped=!0;const C=f({render:x,staticRenderFns:[]},(function(r){r&&r("data-v-283bd7c8_0",{source:"\n.field-placeholder {\r\n  position: absolute;\r\n  left: 0px;\r\n  right: 0px;\r\n  top: 20px;\n}\n.form-bottom-content {\r\n  margin-top: 25px;\r\n  display: flex;\r\n  justify-content: space-between;\n}\n.form-error-message {\r\n  min-height: 17px;\r\n  min-width: 1px;\n}\n.opacity-transparent {\r\n  opacity: 0;\n}\n.form-button-spacing {\r\n  margin-right: 5px;\n}\n@keyframes FormLoadingSpinner {\nfrom {\r\n    -webkit-transform: rotate(0deg);\r\n    transform: rotate(0deg);\n}\nto {\r\n    -webkit-transform: rotate(359deg);\r\n    transform: rotate(359deg);\n}\n}\n.loading-spinner {\r\n  -webkit-animation: FormLoadingSpinner 0.5s infinite steps(8); /* Safari, Chrome and Opera > 12.1 */\r\n  -moz-animation: FormLoadingSpinner 0.5s infinite steps(8); /* Firefox < 16 */\r\n  -ms-animation: FormLoadingSpinner 0.5s infinite steps(8); /* Internet Explorer */\r\n  -o-animation: FormLoadingSpinner 0.5s infinite steps(8); /* Opera < 12.1 */\r\n  animation: FormLoadingSpinner 0.5s infinite steps(8);\n}\r\n",map:{version:3,sources:["C:\\Users\\pedro\\Documents\\Personal Projects\\GitHub\\storybook\\src\\components\\Form\\src\\Form.vue"],names:[],mappings:";AA2QA;EACA,kBAAA;EACA,SAAA;EACA,UAAA;EACA,SAAA;AACA;AACA;EACA,gBAAA;EACA,aAAA;EACA,8BAAA;AACA;AACA;EACA,gBAAA;EACA,cAAA;AACA;AACA;EACA,UAAA;AACA;AACA;EACA,iBAAA;AACA;AACA;AACA;IACA,+BAAA;IACA,uBAAA;AACA;AACA;IACA,iCAAA;IACA,yBAAA;AACA;AACA;AACA;EACA,4DAAA,EAAA,oCAAA;EACA,yDAAA,EAAA,iBAAA;EACA,wDAAA,EAAA,sBAAA;EACA,uDAAA,EAAA,iBAAA;EACA,oDAAA;AACA",file:"Form.vue",sourcesContent:['<template>\r\n  <form>\r\n    <div v-for="(field, index) in internalFields" :key="`field${index}`">\r\n      <form-input\r\n        v-if="field.type != \'select\'"\r\n        :label="field.label"\r\n        :placeholder="field.placeholder"\r\n        :name="field.name"\r\n        :required="field.required"\r\n        :disabled="field.disabled"\r\n        v-model="field.value"\r\n        :errors="internalErrors[field.name]"\r\n        :input-type="field.type"\r\n        @input="validateField(field)"\r\n        @keyup.enter="submitForm(index)"\r\n      ></form-input>\r\n      <raw-form-input\r\n        :errors="internalErrors[field.name]"\r\n        v-else-if="field.type == \'select\'"\r\n      >\r\n        <n-label :for="field.name">{{ field.label }}</n-label>\r\n        <select-me\r\n          :name="field.name"\r\n          :can-be-empty="!field.required"\r\n          :options="field.options"\r\n          v-model="field.value"\r\n          :class="{ \'opacity-transparent\': !load }"\r\n          @input="validateField(field)"\r\n        ></select-me>\r\n        <placeholder\r\n          class="field-placeholder"\r\n          height="35px"\r\n          v-if="!load"\r\n        ></placeholder>\r\n      </raw-form-input>\r\n    </div>\r\n    <div class="form-bottom-content" v-if="showBottom">\r\n      <slot></slot>\r\n      <div>\r\n        <n-button\r\n          type="button"\r\n          flavor="Warning"\r\n          @click="clearAll"\r\n          :disabled="submitting"\r\n          v-if="!disableClearing"\r\n          class="form-button-spacing"\r\n          >Clear</n-button\r\n        >\r\n        <n-button\r\n          type="button"\r\n          flavor="Primary"\r\n          @click="submit($event)"\r\n          :loading="submitting"\r\n          :disabled="submitting || errorsExist || disableSubmission"\r\n        >\r\n          <span>Submit&nbsp;</span>\r\n          <svg\r\n            v-if="submitting"\r\n            xmlns="http://www.w3.org/2000/svg"\r\n            width="14"\r\n            height="14"\r\n            viewBox="0 0 24 24"\r\n            fill="white"\r\n            class="loading-spinner"\r\n          >\r\n            <path\r\n              d="M13.75 22c0 .966-.783 1.75-1.75 1.75s-1.75-.784-1.75-1.75.783-1.75 1.75-1.75 1.75.784 1.75 1.75zm-1.75-22c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm10 10.75c.689 0 1.249.561 1.249 1.25 0 .69-.56 1.25-1.249 1.25-.69 0-1.249-.559-1.249-1.25 0-.689.559-1.25 1.249-1.25zm-22 1.25c0 1.105.896 2 2 2s2-.895 2-2c0-1.104-.896-2-2-2s-2 .896-2 2zm19-8c.551 0 1 .449 1 1 0 .553-.449 1.002-1 1-.551 0-1-.447-1-.998 0-.553.449-1.002 1-1.002zm0 13.5c.828 0 1.5.672 1.5 1.5s-.672 1.501-1.502 1.5c-.826 0-1.498-.671-1.498-1.499 0-.829.672-1.501 1.5-1.501zm-14-14.5c1.104 0 2 .896 2 2s-.896 2-2.001 2c-1.103 0-1.999-.895-1.999-2s.896-2 2-2zm0 14c1.104 0 2 .896 2 2s-.896 2-2.001 2c-1.103 0-1.999-.895-1.999-2s.896-2 2-2z"\r\n            />\r\n          </svg>\r\n        </n-button>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</template>\r\n<script>\r\nimport FormInput from "./FormInput.vue";\r\nimport RawFormInput from "./RawFormInput.vue";\r\nimport SelectMe from "@IntusFacultas/select-me";\r\nimport { NButton } from "@IntusFacultas/button";\r\nimport { NLabel } from "@IntusFacultas/typography";\r\nimport { Placeholder } from "@IntusFacultas/placeholder";\r\nexport const VueForm = {\r\n  components: {\r\n    FormInput,\r\n    NButton,\r\n    SelectMe,\r\n    RawFormInput,\r\n    NLabel,\r\n    Placeholder,\r\n  },\r\n  data() {\r\n    return {\r\n      internalFields: [],\r\n      internalErrors: {},\r\n      load: false,\r\n      errorsExist: false,\r\n      overridenFieldErrors: [],\r\n    };\r\n  },\r\n  props: {\r\n    showBottom: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    submitting: Boolean,\r\n    disableSubmission: Boolean,\r\n    disableClearing: Boolean,\r\n    allowSubmissionOnEnter: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    fields: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    errors: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n  },\r\n  watch: {\r\n    fields() {\r\n      this.internalFields = this.fields.slice();\r\n    },\r\n    errors: {\r\n      handler() {\r\n        // this.internalErrors = Object.assign({}, newVal);\r\n        for (let field of Object.keys(this.errors)) {\r\n          if (this.overridenFieldErrors.indexOf(field) == -1) {\r\n            this.$set(this.internalErrors, field, this.errors[field].slice());\r\n          }\r\n        }\r\n        this.checkErrors();\r\n        this.$forceUpdate();\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n  mounted() {\r\n    let self = this;\r\n    setTimeout(() => {\r\n      self.load = true;\r\n    }, 500);\r\n    this.fields.forEach((field) => {\r\n      this.$watch(() => field, this.handleChange, { deep: true });\r\n    });\r\n    this.internalFields = this.fields.slice();\r\n    for (let field of Object.keys(this.errors)) {\r\n      this.internalErrors[field] = this.errors[field].slice();\r\n    }\r\n  },\r\n  methods: {\r\n    checkErrors() {\r\n      for (let field of Object.keys(this.internalErrors)) {\r\n        if (this.internalErrors[field].length != 0) {\r\n          this.errorsExist = true;\r\n          return true;\r\n        }\r\n      }\r\n      this.errorsExist = false;\r\n      return false;\r\n    },\r\n    submitForm(index) {\r\n      if (\r\n        index == this.internalFields.length - 1 &&\r\n        this.allowSubmissionOnEnter\r\n      ) {\r\n        this.$emit("submit");\r\n      }\r\n    },\r\n    clearAll() {\r\n      for (let field of this.internalFields) {\r\n        field.value = "";\r\n      }\r\n      this.$emit("clear");\r\n      this.$emit("fields", this.internalFields.slice());\r\n    },\r\n    objectDeepEquals(ob1, ob2) {\r\n      let ob1Keys = Object.keys(ob1);\r\n      let ob2Keys = Object.keys(ob2);\r\n      if (ob1Keys.length !== ob2Keys.length) {\r\n        return false;\r\n      }\r\n      for (let key of ob1Keys) {\r\n        if (ob2Keys.indexOf(key) == -1) {\r\n          return false;\r\n        }\r\n        if (typeof ob1[key] != typeof ob2[key]) {\r\n          return false;\r\n        }\r\n        if (typeof ob1[key] == "object") {\r\n          if (!this.objectDeepEquals(ob1[key], ob2[key])) {\r\n            return false;\r\n          }\r\n        } else if (Array.isArray(ob1[key])) {\r\n          if (!this.deepEquals(ob1[key], ob2[key])) {\r\n            return false;\r\n          }\r\n        } else {\r\n          if (ob1[key] != ob2[key]) {\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n      return true;\r\n    },\r\n    deepEquals(ar1, ar2) {\r\n      let still_matches = true;\r\n      let self = this;\r\n      if (!Array.isArray(ar1) || !Array.isArray(ar2)) {\r\n        return false;\r\n      }\r\n      if (ar1.length !== ar2.length) {\r\n        return false;\r\n      }\r\n      ar1.forEach((val1, index) => {\r\n        let val2 = ar2[index];\r\n        if (val1 !== val2 && !self.objectDeepEquals(val1, val2)) {\r\n          still_matches = false;\r\n        }\r\n      });\r\n      return still_matches;\r\n    },\r\n    validateField(field) {\r\n      if (typeof field.validation == "function") {\r\n        let value = field.validation(field.value, this.internalFields);\r\n        if (value) {\r\n          if (!Array.isArray(this.internalErrors[field.name])) {\r\n            this.$set(this.internalErrors, field.name, [value]);\r\n          }\r\n          if (this.internalErrors[field.name].indexOf(value) == -1) {\r\n            this.internalErrors[field.name].push(value);\r\n          }\r\n          this.$forceUpdate();\r\n          this.$emit("errors", this.internalErrors);\r\n          this.checkErrors();\r\n          return false;\r\n        }\r\n      }\r\n      this.internalErrors[field.name] = [];\r\n      if (this.overridenFieldErrors.indexOf(field.name) == -1) {\r\n        this.overridenFieldErrors.push(field.name);\r\n      }\r\n      this.$emit("fields", this.internalFields.slice());\r\n      this.$emit("errors", this.internalErrors);\r\n      this.checkErrors();\r\n      return true;\r\n    },\r\n    handleChange() {\r\n      this.internalFields = this.fields.slice();\r\n    },\r\n    submit($e) {\r\n      $e.preventDefault();\r\n      this.overridenFieldErrors = [];\r\n      document.activeElement.blur();\r\n      this.$emit("submit");\r\n    },\r\n  },\r\n};\r\nexport default VueForm;\r\n<\/script>\r\n\r\n<style>\r\n.field-placeholder {\r\n  position: absolute;\r\n  left: 0px;\r\n  right: 0px;\r\n  top: 20px;\r\n}\r\n.form-bottom-content {\r\n  margin-top: 25px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.form-error-message {\r\n  min-height: 17px;\r\n  min-width: 1px;\r\n}\r\n.opacity-transparent {\r\n  opacity: 0;\r\n}\r\n.form-button-spacing {\r\n  margin-right: 5px;\r\n}\r\n@keyframes FormLoadingSpinner {\r\n  from {\r\n    -webkit-transform: rotate(0deg);\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    -webkit-transform: rotate(359deg);\r\n    transform: rotate(359deg);\r\n  }\r\n}\r\n.loading-spinner {\r\n  -webkit-animation: FormLoadingSpinner 0.5s infinite steps(8); /* Safari, Chrome and Opera > 12.1 */\r\n  -moz-animation: FormLoadingSpinner 0.5s infinite steps(8); /* Firefox < 16 */\r\n  -ms-animation: FormLoadingSpinner 0.5s infinite steps(8); /* Internet Explorer */\r\n  -o-animation: FormLoadingSpinner 0.5s infinite steps(8); /* Opera < 12.1 */\r\n  animation: FormLoadingSpinner 0.5s infinite steps(8);\r\n}\r\n</style>\r\n']},media:void 0})}),F,void 0,!1,void 0,!1,p,void 0,void 0);var w=function(r){w.installed||(w.installed=!0,r.component("VueForm",C))},S={install:w},k=null;"undefined"!=typeof window?k=window.Vue:"undefined"!=typeof global&&(k=global.Vue),k&&k.use(S),C.install=w;export default C;export{C as VueForm};
